{% extends "basic.html" %}
<!--This is the html head.-->
{% block head %}
{% endblock %}
{% block body %}
<header class = "header" >Open Collective Data Visualization</header>
<div class = "information">
    <div id="buttons">
        <button class="headbtn" id="about">About</button>
        <button class="headbtn" id="inst">Instructions</button>
        <button class="headbtn" id="tips">Tips</button>
    </div>
        <div style="text-align: center; height:7vh;" id="infotext">
            <span>
            Open Collective Data Visualization is a tool for community leaders and supporters. It supports Open Collective's vision
            of more transparent crowd-funded projects by making the data provided easier to understand. While Open Collective provides
            lists of names and amounts, it does little to nothing in terms of visually showing you how it all correlates.
            That blind spot is what this project fills by providing useful charts, names, and tracking for all parties involved
            </span>
        </div>
</div>
<!--This creates a form that calls to the index method when submitted -->
<div  style="justify-content:center;padding:5vh;">
    <form action="{{ url_for("index")}}" method="post">
        <input id="communityName" placeholder="Open Collective Community Link" size="50" name="comname"></input >
        <button id="communityButton">Get Data</button>
    </form>
</div>
{% if name %}
<div style="width:100vw;flex-direction: column;text-align: center;font-size: xx-large;">
    {{name}}'s Data
    <img src = {{url_for('static', filename='element.png')}} style="width: 90vw;margin-left: auto;margin-right:auto;border-radius: 1rem;margin-top: 5vh;border:2px solid black;">
    <ul style="list-style: none">
        <li>{{expense1person}} {{expense1amt}}</li>
        <li>{{expense2person}} {{expense2amt}}</li>
        <li>{{expense3person}} {{expense3amt}}</li>
        <li>{{expense4person}} {{expense4amt}}</li>
        <li>{{expense5person}} {{expense5amt}}</li>
    </ul>
</div>
<div class="graphs">
    <div class="chart" id="chart1"></div>
    <div class="chart" id="chart2"></div>
    <div class="chart" id="chart3"></div>
</div>
{% elif Error %}
<div style="width:100%;margin-left:28%;color:red;font-weight: bold;"> There was an error with the open collective link provided, please try again</div>
{% else %}
<div></div>
{% endif %}


<!--Button script for changing the info text (About Inst and Tips)-->
<script src="{{url_for('static', filename='buttons.js')}}"></script>

<!--Graphs scripts-->
{% if not nolink%}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script type="text/javascript">
    var graph1 = {{ graph1JSON | safe}}
    Plotly.plot("chart1", graph1, {})

    var graph2 = {{ graph2JSON | safe}}
    Plotly.plot("chart2", graph2, {})

    var graph3 = {{ graph3JSON | safe}}
    Plotly.plot("chart3", graph3, {})

</script>
{% endif %}
{% endblock %}